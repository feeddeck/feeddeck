app-id: app.feeddeck.feeddeck
runtime: org.freedesktop.Platform
runtime-version: "23.08"
sdk: org.freedesktop.Sdk
command: feeddeck

finish-args:
  - --share=ipc
  - --socket=fallback-x11
  - --socket=wayland
  - --device=dri
  - --share=network
  - --filesystem=home

modules:
  - name: FeedDeck
    buildsystem: simple
    build-commands:
      - cp -R bundle /app/feeddeck
      - mkdir -p /app/bin && ln -s /app/feeddeck/feeddeck /app/bin/feeddeck
      - chmod +x /app/bin/feeddeck
      - install -Dm644 app.feeddeck.feeddeck.svg /app/share/icons/hicolor/scalable/apps/app.feeddeck.feeddeck.svg
      - install -Dm644 app.feeddeck.feeddeck.desktop -t /app/share/applications/
      - install -Dm644 app.feeddeck.feeddeck.metainfo.xml -t /app/share/metainfo/
    sources:
      - type: file
        url: https://raw.githubusercontent.com/feeddeck/feeddeck/main/app/linux/flatpak/app.feeddeck.feeddeck.desktop
        sha256: c66ab88c9683b69914e12d4bc780a46473631b2539ca83503fae404145eae7cf
      - type: file
        url: https://raw.githubusercontent.com/feeddeck/feeddeck/main/app/linux/flatpak/app.feeddeck.feeddeck.metainfo.xml
        sha256: 6c818c36163ebffddea746bea2080bf6fbd571b5eb9f85a0074757b1106d1614
      - type: file
        url: https://raw.githubusercontent.com/feeddeck/feeddeck/main/app/linux/flatpak/app.feeddeck.feeddeck.svg
        sha256: 4a73d70cdaa6fe230eb802fe0f5456df46dfe399826b044086ad46b74c2bd6ce
      - type: archive
        only-arches:
          - x86_64
        url: https://github.com/feeddeck/feeddeck/releases/download/v1.0.0/feeddeck-linux-x86_64.tar.gz
        sha256: f1dbdcb225cab2181ec7dec1606273fc72405dc64e11e4cded78843cdae9eda9
        dest: bundle
      - type: archive
        only-arches:
          - aarch64
        url: https://github.com/feeddeck/feeddeck/releases/download/v1.0.0/feeddeck-linux-arm64.tar.gz
        sha256: 7ef5d977b5ed16d22dc82e8b7dd0df72724b8f9fb2e31bbb88810b2a6a98724c
        dest: bundle
